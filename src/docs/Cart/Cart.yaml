paths:
  /api/cart/:
    get:
      summary: Obtain the list of carts from the data base
      tags:
        - Carts
      responses:
        "200":
          description: The list of carts was obtained
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#components/schemas/Cart'
        "500":
          description: Error taking the list of carts from the data base
    post:
      summary: Create a cart and it will be added to the data base
      tags:
        - Carts
  /api/cart/{cid}/:
    get:
      summary: Obtain a cart by his ID, from the data base
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: Cart Id which is searched
        schema:
          $type: String
      responses:
        "200":
          description: The cart searched was found
        "500":
          description: Error finding the cart searched
    post:
      summary: The cart status will change to be resolved
      tags:
        - Carts
      responses:
        "200":
          description: Cart's status changed
        "500":
          description: Error changing the cart's status
  /api/cart/{cid}/product/{pid}/:
    post:
      summary: Add a product in the cart of the user logged
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: Id from the cart where a product is going to be added
        schema:
          $type: String
      - name: pid
        in: path
        required: true
        description: Id from the product which is going to be added in a cart
        schema:
          $type: String
      responses:
        "200":
          description: The product was added to the user's cart
        "500":
          description: Error adding the product to the user's cart
  /api/cart/{cid}/purchase:
    post:
      summary: Complete a purchase in the store, all the products in the cart with stock in the store will be bought by the customer
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: Id from the cart which is going to be purchased
        schema:
          $type: String
      responses:
        "200":
          description: The purchase was completed
        "500":
          description: Error confirming the purchase

components:
  schemas:
    Cart:
      type: object
      properties:
        _id:
          type: ObjectId
          description: Id generated by MongoDB
        cartName:
          type: String
          description: Name of the cart
        status:
          type: String
          description: Cart status
        totalPrice:
          type: Number
          description: Total price of the cart, result from all the products available to be purchased
        products:
          type: array
          items:
            type: object
            properties:
              productId:
                type: String
                description: The Id of the product added to the cart
              quantity:
                type: Number
                description: The quantity of the product added to the cart
          description: Products inside the cart
      example:
        _id: Object_id('653943af988e3c2ecfba01b4')
        cartName: My Cart
        status: Waiting
        TotalPrice: 100
        products:
          - productId: "613dcb7c372c760015fff109"
            quantity: 2
          - productId: "613dcb7c372c760015fff10a"
            quantity: 1
